


<h5>Abroad Control Center</h5>
<p>msg : {message}</p>


<div>
canada, australia, new zealand, abroad in other countries, visa and articles, migration and language courses(see cds.org.ir its related tab) 
</div>


<!-- set actions and bind content  -->
<div class="row">
    {#await getuser}
        <Loading big/>
    {:then user}
        <p>access: {user.access}</p>
        <Table indexed highlight rows={1}
        content={[{name: "force", actions: [false]}, {name: "wo", actions: [true]}]}
        search={["name"]}
        actions={[{icon: "delete",tooltip: "delete", action(obj, component) {
                var {content} = component.get();
                delete content[content.indexOf(obj)];
                content = content.filter(e => e != null)
                component.set({content})
            }
        }]}
        on:result=console.log("result:",event)/>
    {:catch err}
        <p>Error {err.code}</p>
    {/await}
</div>

<script>
export default {
    data(){
        return {
            getuser:
                fetch("/getuser")
                .then(r=>{ if(r.status == 200) return r; else throw {code: r.status}})
                .then(r=>r.json())
                .then(j=>j.body)
        }
    },
    components: {
        Loading: "../../tags/Loading.html",
        Table: "../../tags/Table.html"
    }
}
</script>